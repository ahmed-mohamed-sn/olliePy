

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Error analysis report for regression &mdash; Olliepy 0.2.9 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Interactive dashboard" href="interactive_dashboard.html" />
    <link rel="prev" title="Getting started" href="../getting_started.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Olliepy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">OlliePy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started</a></li>
</ul>
<p class="caption"><span class="caption-text">Reports</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Error analysis report for regression</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive_dashboard.html">Interactive dashboard</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Olliepy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Error analysis report for regression</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/pages/reports/regression_error_analysis.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="error-analysis-report-for-regression">
<h1>Error analysis report for regression<a class="headerlink" href="#error-analysis-report-for-regression" title="Permalink to this headline">Â¶</a></h1>
<p>Follow the following steps in order to generate the report.</p>
<p>1- Import the RegressionErrorAnalysisReport class from <strong>OlliePy</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">olliepy</span> <span class="kn">import</span> <span class="n">RegressionErrorAnalysisReport</span>
</pre></div>
</div>
<p>2- Calculate the error for the training data after fitting the ML model.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">y_train_pred</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
<span class="n">train_df</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">y_train_pred</span> <span class="o">-</span> <span class="n">y_train</span>
</pre></div>
</div>
<p>3- Calculate the error for the test/validation data</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">y_test_pred</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="n">test_df</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">y_test_pred</span> <span class="o">-</span> <span class="n">y_test</span>
</pre></div>
</div>
<p>4- Plot the test/validation error distribution</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">test_df</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="Error distribution" src="../../_images/TestErrorDistribution.png" /></p>
<p>5- Create the error classes dictionary using the error distribution, where the key is the name of the error class,
and the value is the min (inclusive) and max (exclusive) error of the class as a tuple.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">error_classes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;EXTREME_UNDER_ESTIMATION&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mf">8.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">4.0</span><span class="p">),</span>
    <span class="s1">&#39;HIGH_UNDER_ESTIMATION&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mf">4.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">),</span>
    <span class="s1">&#39;MEDIUM_UNDER_ESTIMATION&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mf">3.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">),</span>
    <span class="s1">&#39;LOW_UNDER_ESTIMATION&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">),</span>
    <span class="s1">&#39;ACCEPTABLE&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span>
    <span class="s1">&#39;OVER_ESTIMATING&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>7- Select the numerical and categorical features that you would like to include in the report</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">categorical_features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span>
<span class="n">numerical_features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">,</span> <span class="s1">&#39;height&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>8- Create the report like the following example. Both the train and test/validation data frames should have the error and target columns.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">report</span> <span class="o">=</span> <span class="n">RegressionErrorAnalysisReport</span><span class="p">(</span>
                <span class="n">train_df</span><span class="o">=</span><span class="n">train_df</span><span class="p">,</span>
                <span class="n">test_df</span><span class="o">=</span><span class="n">test_df</span><span class="p">,</span>
                <span class="n">target_feature_name</span><span class="o">=</span><span class="s1">&#39;BMI&#39;</span><span class="p">,</span>
                <span class="n">error_column_name</span><span class="o">=</span><span class="s1">&#39;error&#39;</span><span class="p">,</span>
                <span class="n">error_classes</span><span class="o">=</span><span class="n">error_classes</span><span class="p">,</span>
                <span class="n">acceptable_error_class</span><span class="o">=</span><span class="s1">&#39;ACCEPTABLE&#39;</span><span class="p">,</span>
                <span class="n">numerical_features</span><span class="o">=</span><span class="n">numerical_features</span><span class="p">,</span>
                <span class="n">categorical_features</span><span class="o">=</span><span class="n">categorical_features</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;BMI Regression Report&#39;</span><span class="p">,</span>
                <span class="n">subtitle</span><span class="o">=</span><span class="s1">&#39;BMI distribution shift&#39;</span><span class="p">,</span>
                <span class="n">output_directory</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span>
                <span class="n">report_folder_name</span><span class="o">=</span><span class="s1">&#39;BMI_REPORT&#39;</span><span class="p">,</span>
                <span class="n">generate_encryption_secret</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">report</span><span class="o">.</span><span class="n">create_report</span><span class="p">()</span>
</pre></div>
</div>
<p>9- View the report using one of the following methods</p>
<ul class="simple">
<li><p>Using a local server</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">report</span><span class="o">.</span><span class="n">serve_report_from_local_server</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;server&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Save then view the report locally using the index.html file in the report folder</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">report</span><span class="o">.</span><span class="n">save_report</span><span class="p">(</span><span class="n">zip_report</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="interactive_dashboard.html" class="btn btn-neutral float-right" title="Interactive dashboard" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../getting_started.html" class="btn btn-neutral float-left" title="Getting started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Ahmed Mohamed

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>